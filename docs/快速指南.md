# ğŸ¦ å¿«é€ŸæŒ‡å—

è¯¦ç»†ä½¿ç”¨è¯´æ˜æ–‡æ¡£ã€‚å¦‚éœ€å¿«é€Ÿä¸Šæ‰‹ï¼Œè¯·æŸ¥çœ‹ `README.md`ã€‚

## ğŸ“‹ ä¸€ã€ä¸€é”®å¤„ç†æ–°å¢é¸Ÿç±»ï¼ˆæœ€æ¨èï¼‰

**é€‚ç”¨äºï¼šä»ä¸­å›½è§‚é¸Ÿè®°å½•ä¸­å¿ƒå¤åˆ¶é¸Ÿç±»åˆ—è¡¨**

```bash
# 1. å°†è§‚é¸Ÿè®°å½•ä¸­å¿ƒçš„é¡µé¢å†…å®¹å¤åˆ¶åˆ° æ–°å¢é¸Ÿå•.txtï¼ˆCTRL+Aå¤åˆ¶å…¨é¡µé¢ï¼‰

# 2. è®¾ç½®ç¯å¢ƒå˜é‡
export EBIRD_TOKEN=your_token

# 3. ä¸€é”®å¤„ç†ï¼ˆè‡ªåŠ¨å®Œæˆæ‰€æœ‰æ­¥éª¤ï¼‰
python3 tools/process_new_birds.py
```

**è„šæœ¬è‡ªåŠ¨å®Œæˆï¼š**
- âœ… è§£ææ–°å¢é¸Ÿå•.txtï¼ˆæ”¯æŒç‰¹æ®Šå­—ç¬¦å¦‚ä´™ä´˜ï¼‰
- âœ… åˆå¹¶ all_birds.csv ä¿¡æ¯ï¼ˆä¼˜å…ˆä½¿ç”¨ CSV ä¸­çš„å®Œæ•´ä¿¡æ¯ï¼‰
- âœ… æ£€æŸ¥å¹¶ä¸‹è½½ç¼ºå¤±çš„é¸Ÿç±»å›¾ç‰‡ï¼ˆæ£€æŸ¥ Cloudinary ä¸Šä¼ è®°å½•ï¼‰
- âœ… ä¸Šä¼ ç¼ºå¤±çš„é¸Ÿç±»åˆ° Cloudinaryï¼ˆä¼˜å…ˆä½¿ç”¨ all_birds.csv æ„å»º bird_infoï¼‰
- âœ… æ›´æ–° bird_info å­—æ®µï¼ˆç¡®ä¿ä¸­æ–‡åæ­£ç¡®ï¼‰
- âœ… è¡¥å…¨ all_birds.csvï¼ˆæ–°é¸Ÿç±»è‡ªåŠ¨æ·»åŠ ï¼‰
- âœ… ç”Ÿæˆæ”¯æŒåˆ é™¤åŠŸèƒ½çš„ HTML é¡µé¢
- âœ… å°†æ–°ä¸Šä¼ çš„é¸Ÿç±»è°ƒæ•´åˆ°åˆ—è¡¨é¡¶éƒ¨

**HTMLé¡µé¢åŠŸèƒ½ï¼š** å¤šé€‰å›¾ç‰‡ã€å¤åˆ¶åˆ é™¤æ¸…å•ã€å…¨é€‰åˆ†ç»„ã€æ¸…ç©ºé€‰æ‹©ã€å›¾ç‰‡é¢„è§ˆï¼ˆç¯ç®±ï¼‰

**é‡è¦è¯´æ˜ï¼š** `all_birds.csv` æ˜¯é¸Ÿç±»ä¿¡æ¯çš„ä¸»æ•°æ®æºï¼Œæµç¨‹ä¼šä¼˜å…ˆä½¿ç”¨å…¶ä¸­çš„ä¿¡æ¯ï¼Œæ–°é¸Ÿç±»ä¼šè‡ªåŠ¨æ·»åŠ åˆ° CSV ä¸­ã€‚

---

## ğŸ“‹ äºŒã€æ‰¹é‡ä¸‹è½½ï¼ˆæ‰‹åŠ¨æµç¨‹ï¼‰

**é€‚ç”¨äºï¼šå·²æœ‰CSVæ–‡ä»¶æˆ–éœ€è¦æ‰‹åŠ¨æ§åˆ¶æµç¨‹**

```bash
# 1. å‡†å¤‡ CSV æ–‡ä»¶
# æ–¹å¼Aï¼šå¿«é€Ÿè½¬æ¢ï¼ˆä»å¯¹è¯æ¡†ç²˜è´´é¸Ÿç±»åˆ—è¡¨ï¼‰
python3 tools/convert_to_csv.py --auto - > my_birds.csv
# ç²˜è´´å†…å®¹åæŒ‰ Ctrl+D ç»“æŸï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æŸ¥è¯¢ eBird API è¡¥å…¨è‹±æ–‡å

# æ–¹å¼Bï¼šæ‰‹åŠ¨ç¼–è¾‘ï¼ˆå‚è€ƒ examples/birds_template.csvï¼‰

# 2. è®¾ç½®ç¯å¢ƒå˜é‡
export EBIRD_TOKEN=your_token

# 3. æ‰¹é‡ä¸‹è½½å¹¶ä¸Šä¼ 
./tools/batch_fetch.sh my_birds.csv --parallel 3
python3 tools/upload_to_cloudinary.py all
python3 tools/update_gallery_from_cloudinary.py
open examples/gallery_all_cloudinary.html
```

**æ³¨æ„ï¼š** ä½¿ç”¨ `update_gallery_from_cloudinary.py` ç”Ÿæˆæ”¯æŒåˆ é™¤åŠŸèƒ½çš„ HTML é¡µé¢ï¼Œæ–°ä¸Šä¼ çš„é¸Ÿç±»ä¼šè‡ªåŠ¨æ’åœ¨åˆ—è¡¨é¡¶éƒ¨ã€‚

### CSV æ ¼å¼è¯´æ˜

```csv
# slug,english_name,scientific_name,wikipedia_page
# slug: æ–‡ä»¶å¤¹åï¼ˆå°å†™+ä¸‹åˆ’çº¿ï¼‰
# wikipedia_page: å¯é€‰

bluetail,Red-flanked Bluetail,Tarsiger cyanurus,Red-flanked_Bluetail
marsh_tit,Marsh Tit,Poecile palustris,Marsh_Tit
```

**å¸¸ç”¨å‚æ•°ï¼š** `--parallel N`ï¼ˆå¹¶è¡Œæ•°é‡ï¼Œé»˜è®¤ 3ï¼Œæ¨è 3-5ï¼‰

### è½¬æ¢å·¥å…·ï¼ˆconvert_to_csv.pyï¼‰

**æ”¯æŒçš„è¾“å…¥æ ¼å¼ï¼š**
- `39 4770 - å¤§å±±é›€ Parus minor Ã— 6`ï¼ˆå¸¦ç¼–å·å’Œæ•°é‡ï¼‰
- `å¤§å±±é›€ Great Tit Parus minor`ï¼ˆå®Œæ•´ä¿¡æ¯ï¼‰
- `å¤§å±±é›€ Parus minor`ï¼ˆè‡ªåŠ¨æŸ¥è¯¢è‹±æ–‡åï¼‰
- `å¤§å±±é›€`ï¼ˆäº¤äº’æ¨¡å¼ï¼‰

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```bash
python3 tools/convert_to_csv.py --auto - > my_birds.csv  # ä»å‰ªè´´æ¿ç²˜è´´
python3 tools/convert_to_csv.py --auto input.txt > my_birds.csv  # ä»æ–‡ä»¶è½¬æ¢
```

**è‡ªåŠ¨æŸ¥è¯¢åŠŸèƒ½ï¼š** è‡ªåŠ¨è°ƒç”¨ eBird API æŸ¥è¯¢è‹±æ–‡åï¼Œä½¿ç”¨æœˆåº¦ç¼“å­˜ï¼Œè‡ªåŠ¨å¤„ç†å­¦ååˆ†ç±»å˜æ›´ï¼ˆéœ€è®¾ç½® `EBIRD_TOKEN`ï¼‰

---

## ğŸ“Œ ä¸‰ã€å•ä¸ªç‰©ç§ä¸‹è½½

**é€‚ç”¨äºï¼šå•ä¸ªç‰©ç§æˆ–æµ‹è¯•**

```bash
export EBIRD_TOKEN=your_token
./tools/fetch_four_sources.sh bluetail "Red-flanked Bluetail" "Tarsiger cyanurus"
python3 tools/upload_to_cloudinary.py bluetail
python3 tools/update_gallery_from_cloudinary.py
```

---

## ğŸ”§ å››ã€all_birds.csv ç®¡ç†

`all_birds.csv` æ˜¯é¸Ÿç±»ä¿¡æ¯çš„ä¸»æ•°æ®æºï¼ˆæ ¼å¼ï¼š`slug,chinese_name,english_name,scientific_name,wikipedia_page`ï¼‰ï¼Œç”¨äºï¼š
- ä½œä¸ºé¸Ÿç±»ä¿¡æ¯çš„æƒå¨æ¥æº
- ç¡®ä¿ä¸‹è½½å’Œä¸Šä¼ æ—¶ä½¿ç”¨å‡†ç¡®çš„åç§°ä¿¡æ¯
- é¿å…é‡å¤å¤„ç†å’Œé”™è¯¯ä¿¡æ¯
- è‡ªåŠ¨è¡¥å…¨æ–°é¸Ÿç±»ä¿¡æ¯

**è‡ªåŠ¨è¡¥å…¨ï¼š** å¤„ç†æ–°é¸Ÿç±»æ—¶ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ä» CSV è¯»å–å·²æœ‰ä¿¡æ¯ï¼ˆä¼˜å…ˆä½¿ç”¨ï¼‰ï¼Œåˆå¹¶æ–°ä¿¡æ¯ï¼Œä¸Šä¼ åè‡ªåŠ¨æ·»åŠ æ–°é¸Ÿç±»ã€‚

**æ‰‹åŠ¨ç®¡ç†ï¼š**
```bash
python3 tools/add_missing_birds_to_csv.py  # ä»JSONæ–‡ä»¶æå–å¹¶æ·»åŠ åˆ°CSV
python3 tools/rebuild_csv_from_json.py     # ä»JSONæ–‡ä»¶é‡å»ºCSV
python3 tools/update_bird_info_in_json.py  # æ›´æ–°JSONæ–‡ä»¶çš„bird_infoå­—æ®µ
```

---

## ğŸ”§ äº”ã€HTMLé¡µé¢ç”Ÿæˆ

**ç”Ÿæˆæ”¯æŒåˆ é™¤åŠŸèƒ½çš„HTMLï¼š**
```bash
python3 tools/update_gallery_from_cloudinary.py
```

**åŠŸèƒ½ç‰¹æ€§ï¼š** å¤šé€‰å›¾ç‰‡ã€å¤åˆ¶åˆ é™¤æ¸…å•ã€å…¨é€‰åˆ†ç»„ã€æ¸…ç©ºé€‰æ‹©ã€å›¾ç‰‡é¢„è§ˆï¼ˆç¯ç®±ï¼‰

**æ’åºé€»è¾‘ï¼š** æ–°ä¸Šä¼ çš„é¸Ÿç±»è‡ªåŠ¨æ’åœ¨åˆ—è¡¨é¡¶éƒ¨ï¼Œè„šæœ¬æ£€æµ‹ `cloudinary_uploads/` ç›®å½•ä¸­çš„æ–°JSONæ–‡ä»¶ã€‚

**bird_infoå­—æ®µè¦æ±‚ï¼š** æ¯ä¸ªJSONæ–‡ä»¶å¿…é¡»åŒ…å« `bird_info` å­—æ®µï¼ˆ`chinese_name`ã€`english_name`ã€`scientific_name`ï¼‰ï¼Œä¼˜å…ˆä» `all_birds.csv` è¯»å–ã€‚

---

## â“ å…­ã€å¸¸è§é—®é¢˜

### 1. Macaulay è·å–å¤±è´¥ï¼Ÿ
**åŸå› ï¼š** å­¦ååˆ†ç±»å˜æ›´æˆ–ç‰©ç§ä¸åœ¨ eBird æ•°æ®åº“ä¸­  
**è§£å†³ï¼š** è„šæœ¬å·²è‡ªåŠ¨å¤„ç†å­¦ååˆ†ç±»å˜æ›´ï¼Œæœªæ‰¾åˆ°æ—¶è‡ªåŠ¨è·³è¿‡ï¼Œä¸å½±å“å…¶ä»–æº

### 2. é‡å¤è¿è¡Œä¼šé‡æ–°ä¸‹è½½å—ï¼Ÿ
**ä¸ä¼šï¼** è„šæœ¬è‡ªåŠ¨æ£€æµ‹å·²ä¸‹è½½çš„æ–‡ä»¶ï¼Œè·³è¿‡æœ‰æ•ˆæ–‡ä»¶ï¼ˆæ˜¾ç¤º "â­ï¸ å·²å­˜åœ¨"ï¼‰ï¼Œé‡å¤è¿è¡Œåªéœ€ ~3 ç§’

### 3. å¦‚ä½•å¤„ç†å¤±è´¥çš„ä¸‹è½½ï¼Ÿ
**æŸ¥çœ‹æ—¥å¿—ï¼š** `ls /tmp/*_download.log` æˆ– `cat /tmp/bird_name_download.log`  
**é‡æ–°ä¸‹è½½ï¼š** ç›´æ¥é‡æ–°è¿è¡Œï¼Œä¼šè‡ªåŠ¨è·³è¿‡å·²æœ‰æ–‡ä»¶

### 4. ç¼“å­˜åœ¨å“ªé‡Œï¼Ÿ
**eBird Taxonomy ç¼“å­˜ï¼š** `~/.cache/bird_memory_cards/`ï¼ˆæœˆåº¦è‡ªåŠ¨æ›´æ–°ï¼‰  
**æ¸…ç†ç¼“å­˜ï¼š** `rm ~/.cache/bird_memory_cards/ebird_taxonomy_*.json`

---

## âš¡ ä¸ƒã€æ€§èƒ½æ•°æ®

| ç‰©ç§æ•°é‡ | å¹¶è¡Œä¸‹è½½ | é¢„è®¡æ—¶é—´ | é‡å¤è¿è¡Œ |
|---------|---------|---------|---------|
| 1 ç§ | - | ~30 ç§’ | ~3 ç§’ |
| 10 ç§ | 3 ä¸ª | ~2 åˆ†é’Ÿ | ~15 ç§’ |
| 25 ç§ | 3 ä¸ª | ~6 åˆ†é’Ÿ | ~30 ç§’ |

---

## ğŸ’¡ å…«ã€æŠ€å·§

**æ–­ç‚¹ç»­ä¼ ï¼š** ç›´æ¥é‡æ–°è¿è¡Œï¼Œè‡ªåŠ¨è·³è¿‡å·²ä¸‹è½½  
**è¡¥å……ç¼ºå¤±æºï¼š** é‡æ–°è¿è¡Œä¼šè‡ªåŠ¨è¡¥å……ç¼ºå¤±çš„æº  
**æŒä¹…åŒ– Tokenï¼š** `echo 'export EBIRD_TOKEN=your_token' >> ~/.zshrc && source ~/.zshrc`

---

## ğŸš€ ä¹ã€å·¥ä½œæµç¨‹ç¤ºä¾‹

**åœºæ™¯ï¼šæ–°å¢ 20 ç§é¸Ÿç±»**
```bash
vim my_20_birds.csv                                    # 1. å‡†å¤‡ CSVï¼ˆ~2 åˆ†é’Ÿï¼‰
./tools/batch_fetch.sh my_20_birds.csv --parallel 3   # 2. æ‰¹é‡ä¸‹è½½ï¼ˆ~5 åˆ†é’Ÿï¼‰
python3 tools/upload_to_cloudinary.py all              # 3. ä¸Šä¼  Cloudinaryï¼ˆ~3 åˆ†é’Ÿï¼‰
python3 tools/update_gallery_from_cloudinary.py       # 4. ç”Ÿæˆé¡µé¢ï¼ˆ<10 ç§’ï¼‰
open examples/gallery_all_cloudinary.html              # 5. æŸ¥çœ‹ç»“æœ
```
**æ€»è€—æ—¶ï¼š** ~10 åˆ†é’Ÿ

---

## ğŸ“ å¸®åŠ©

- **é¡¹ç›®æ¦‚è§ˆ**ï¼š`README.md`
- **CSV æ¨¡æ¿**ï¼š`examples/birds_template.csv`
- **æ‰¹é‡å·¥å…·å¸®åŠ©**ï¼š`./tools/batch_fetch.sh`ï¼ˆæ— å‚æ•°æŸ¥çœ‹ç”¨æ³•ï¼‰

---

æœ€åæ›´æ–°ï¼š2025-11-05

